# NÃ¢ng cáº¥p AI Insights - PhÃ¢n tÃ­ch ChuyÃªn nghiá»‡p

## Váº¥n Ä‘á» cÅ©
AI chá»‰ **mÃ´ táº£ sá»‘ liá»‡u** thÃ´, khÃ´ng cÃ³ giÃ¡ trá»‹ thá»±c táº¿:
- âŒ "Doanh thu tÄƒng 15%" (Váº­y thÃ¬ sao?)
- âŒ "CÃ³ 3 sáº£n pháº©m sáº¯p háº¿t" (Sáº£n pháº©m nÃ o? áº¢nh hÆ°á»Ÿng gÃ¬?)
- âŒ "Tá»· lá»‡ há»§y cao" (Cao bao nhiÃªu? Táº¡i sao? LÃ m gÃ¬?)

## NÃ¢ng cáº¥p má»›i

### 1. Cáº¥u trÃºc Insight 3 pháº§n
Má»—i insight bÃ¢y giá» cÃ³:
- **PHÃT HIá»†N**: Sá»‘ liá»‡u + so sÃ¡nh benchmark
- **NGUYÃŠN NHÃ‚N**: Giáº£i thÃ­ch táº¡i sao
- **HÃ€NH Äá»˜NG**: Gá»£i Ã½ cá»¥ thá»ƒ lÃ m gÃ¬

**VÃ­ dá»¥ insight tá»‘t:**
```
Title: "Nguy cÆ¡ háº¿t hÃ ng sáº£n pháº©m bÃ¡n cháº¡y"
Message: "Hoa Há»“ng Äá» (top 1 doanh thu) chá»‰ cÃ²n 8 bÃ´ng, dá»± kiáº¿n háº¿t trong 2 ngÃ y. 
Tuáº§n trÆ°á»›c bÃ¡n 45 bÃ´ng/ngÃ y. NÃªn nháº­p gáº¥p 200 bÃ´ng Ä‘á»ƒ Ä‘Ã¡p á»©ng nhu cáº§u cuá»‘i tuáº§n."
Action: "Nháº­p hÃ ng ngay" â†’ /admin/products
```

### 2. Benchmark ngÃ nh hoa tÆ°Æ¡i
AI bÃ¢y giá» so sÃ¡nh vá»›i chuáº©n ngÃ nh:
- Tá»· lá»‡ há»§y: <5% (tá»‘t), 5-8% (TB), >8% (kÃ©m)
- Review tÃ­ch cá»±c: >90% (xuáº¥t sáº¯c), 80-90% (tá»‘t), <80% (cáº§n cáº£i thiá»‡n)
- Tá»“n kho: 2-4 tuáº§n (tá»‘i Æ°u), <1 tuáº§n (thiáº¿u), >6 tuáº§n (á»© Ä‘á»ng)
- AOV: 300-500k (tháº¥p), 500-800k (tá»‘t), >800k (cao)

### 3. CÃ¢u há»i phÃ¢n tÃ­ch thÃ´ng minh
AI Ä‘Æ°á»£c hÆ°á»›ng dáº«n tráº£ lá»i:
1. Doanh thu tÄƒng/giáº£m do ÄÃ‚U?
2. Sáº£n pháº©m nÃ o Bá»Š Bá» QUA nhÆ°ng cÃ³ tiá»m nÄƒng?
3. Nguy cÆ¡ Máº¤T KHÃCH nÃ o?
4. CÆ¡ há»™i TÄ‚NG DOANH THU nÃ o?
5. Váº¥n Ä‘á» Váº¬N HÃ€NH cáº§n xá»­ lÃ½ Gáº¤P?

### 4. Æ¯u tiÃªn theo tÃ¡c Ä‘á»™ng
Insights Ä‘Æ°á»£c sáº¯p xáº¿p theo má»©c Ä‘á»™ áº£nh hÆ°á»Ÿng:
1. **Doanh thu** (máº¥t tiá»n/cÆ¡ há»™i kiáº¿m tiá»n)
2. **Tá»“n kho** (háº¿t hÃ ng bÃ¡n cháº¡y/á»© Ä‘á»ng vá»‘n)
3. **ÄÆ¡n hÃ ng** (tá»· lá»‡ há»§y/chá» xá»­ lÃ½ lÃ¢u)
4. **Review** (tráº£i nghiá»‡m khÃ¡ch hÃ ng)

## So sÃ¡nh trÆ°á»›c/sau

### TrÆ°á»›c (mÃ´ táº£ sá»‘ liá»‡u)
```json
{
  "title": "Doanh thu tÄƒng",
  "message": "Doanh thu 24h gáº§n nháº¥t lÃ  3,360,000 VND, tÄƒng 15% so vá»›i trÆ°á»›c Ä‘Ã³.",
  "severity": "success"
}
```

### Sau (phÃ¢n tÃ­ch + hÃ nh Ä‘á»™ng)
```json
{
  "title": "CÆ¡ há»™i tÄƒng 30% doanh thu cuá»‘i tuáº§n",
  "message": "Doanh thu 24h tÄƒng 15% nhá» Hoa Há»“ng Äá» bÃ¡n cháº¡y (45 bÃ´ng/ngÃ y). 
  NhÆ°ng chá»‰ cÃ²n 8 bÃ´ng tá»“n kho, dá»± kiáº¿n háº¿t trong 2 ngÃ y. 
  Náº¿u nháº­p thÃªm 200 bÃ´ng trÆ°á»›c cuá»‘i tuáº§n, cÃ³ thá»ƒ tÄƒng thÃªm 1M doanh thu.",
  "severity": "success",
  "actionLink": "/admin/products",
  "actionText": "Nháº­p hÃ ng ngay"
}
```

## CÃ¡ch test

### 1. Clear cache AI
```bash
# Trong browser console (F12)
fetch('/admin/api/ai-insights/clear-cache', {
  method: 'POST',
  credentials: 'include'
}).then(r => r.json()).then(console.log);
```

### 2. Refresh dashboard
- Truy cáº­p: `http://localhost:8080/admin/dashboard`
- Pháº§n "AI PhÃ¢n TÃ­ch" sáº½ tá»± Ä‘á»™ng load
- Xem insights má»›i cÃ³ cáº¥u trÃºc 3 pháº§n: PhÃ¡t hiá»‡n - NguyÃªn nhÃ¢n - HÃ nh Ä‘á»™ng

### 3. Kiá»ƒm tra cháº¥t lÆ°á»£ng
Insights tá»‘t pháº£i cÃ³:
- âœ… Sá»‘ liá»‡u cá»¥ thá»ƒ (%, sá»‘ tiá»n, tÃªn sáº£n pháº©m)
- âœ… So sÃ¡nh vá»›i benchmark hoáº·c ká»³ trÆ°á»›c
- âœ… Giáº£i thÃ­ch nguyÃªn nhÃ¢n
- âœ… Gá»£i Ã½ hÃ nh Ä‘á»™ng cá»¥ thá»ƒ
- âœ… Link Ä‘áº¿n trang liÃªn quan (náº¿u cÃ³)

## File Ä‘Ã£ sá»­a

- âœ… `src/main/java/com/example/demo/service/AdminAiInsightsService.java`
  - NÃ¢ng cáº¥p prompt AI vá»›i nguyÃªn táº¯c phÃ¢n tÃ­ch chuyÃªn nghiá»‡p
  - ThÃªm benchmark ngÃ nh hoa tÆ°Æ¡i
  - ThÃªm cÃ¢u há»i phÃ¢n tÃ­ch thÃ´ng minh
  - ThÃªm vÃ­ dá»¥ insight tá»‘t/tá»‡ Ä‘á»ƒ AI há»c

## Lá»£i Ã­ch

### Cho Admin:
- ğŸ“Š Hiá»ƒu rÃµ **Táº I SAO** sá»‘ liá»‡u thay Ä‘á»•i
- ğŸ¯ Biáº¿t **LÃ€M GÃŒ** ngay láº­p tá»©c
- ğŸ’° PhÃ¡t hiá»‡n **CÆ  Há»˜I** tÄƒng doanh thu
- âš ï¸ Cáº£nh bÃ¡o **Rá»¦I RO** máº¥t khÃ¡ch/tiá»n

### Cho Business:
- TÄƒng hiá»‡u quáº£ ra quyáº¿t Ä‘á»‹nh
- Giáº£m thá»i gian phÃ¢n tÃ­ch thá»§ cÃ´ng
- PhÃ¡t hiá»‡n váº¥n Ä‘á» sá»›m hÆ¡n
- Tá»‘i Æ°u tá»“n kho & doanh thu

## VÃ­ dá»¥ insights thá»±c táº¿ (sau nÃ¢ng cáº¥p)

### 1. Inventory Alert
```
ğŸš¨ "Nguy cÆ¡ háº¿t hÃ ng sáº£n pháº©m bÃ¡n cháº¡y"
Hoa Há»“ng Äá» (top 1 doanh thu, 1.2M/tuáº§n) chá»‰ cÃ²n 8 bÃ´ng. 
Tá»‘c Ä‘á»™ bÃ¡n 45 bÃ´ng/ngÃ y â†’ háº¿t trong 2 ngÃ y. 
Cuá»‘i tuáº§n lÃ  peak demand (+80%). 
â†’ Nháº­p gáº¥p 200 bÃ´ng Ä‘á»ƒ trÃ¡nh máº¥t 1.5M doanh thu.
```

### 2. Revenue Opportunity
```
ğŸ’° "CÆ¡ há»™i tÄƒng 25% doanh thu tá»« combo"
KhÃ¡ch mua Hoa Há»“ng thÆ°á»ng mua thÃªm Hoa Baby (70% correlation). 
NhÆ°ng chá»‰ 15% Ä‘Æ°á»£c suggest combo. 
â†’ Táº¡o combo "Há»“ng + Baby" giáº£m 10% cÃ³ thá»ƒ tÄƒng 800k/tuáº§n.
```

### 3. Customer Risk
```
âš ï¸ "Tá»· lá»‡ há»§y Ä‘Æ¡n cao hÆ¡n ngÃ nh 60%"
Tá»· lá»‡ há»§y 8.5% (ngÃ nh 5%). NguyÃªn nhÃ¢n: giao cháº­m (45%), 
sáº£n pháº©m khÃ´ng Ä‘Ãºng (30%). 
â†’ Äá»•i sang GHN Express, tÄƒng QC áº£nh trÆ°á»›c giao.
```

### 4. Review Issue
```
ğŸ˜¡ "3 khÃ¡ch phÃ n nÃ n vá» cháº¥t lÆ°á»£ng hoa"
Review 1-2 sao tÄƒng 40% tuáº§n nÃ y. Chá»§ yáº¿u vá» "hoa hÃ©o", "khÃ´ng tÆ°Æ¡i". 
CÃ³ thá»ƒ do nhÃ  cung cáº¥p má»›i hoáº·c báº£o quáº£n kÃ©m. 
â†’ Kiá»ƒm tra kho láº¡nh, Ä‘á»•i nhÃ  cung cáº¥p náº¿u cáº§n.
```

---
**Káº¿t luáº­n**: AI bÃ¢y giá» lÃ  **Business Analyst thá»±c sá»±**, khÃ´ng chá»‰ lÃ  tool hiá»ƒn thá»‹ sá»‘ liá»‡u!
