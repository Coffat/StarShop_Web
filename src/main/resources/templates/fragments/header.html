<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" 
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security" 
      lang="vi">

<!-- Professional Header Fragment -->
<div th:fragment="header" class="header-wrapper">
    <!-- Top Bar - Logo & User Actions -->
    <div class="top-bar">
        <div class="container">
            <div class="top-bar-content">
                <!-- Left: Logo -->
                <div class="top-logo-section">
                    <a href="/" class="top-logo-link">
                        <span class="logo-text">StarShop</span>
                        <span class="logo-icon heartbeat">üå∏</span>
                    </a>
                </div>

                <!-- Center: Search Bar -->
                <div class="top-bar-search d-none d-lg-flex">
                    <form class="search-form" action="/search" method="GET">
                        <div class="search-input-group">
                            <input type="text" 
                                   class="search-input" 
                                   name="q" 
                                   placeholder="üå∏ T√¨m hoa nhanh - Hoa sinh nh·∫≠t, t√¨nh y√™u, c∆∞·ªõi..."
                                   th:value="${searchQuery}"
                                   autocomplete="off">
                            <button type="submit" class="search-btn">
                                <svg class="hero-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                                    <path fill-rule="evenodd" d="M9 3.5a5.5 5.5 0 1 0 0 11 5.5 5.5 0 0 0 0-11ZM2 9a7 7 0 1 1 12.452 4.391l3.328 3.329a.75.75 0 1 1-1.06 1.06l-3.329-3.328A7 7 0 0 1 2 9Z" clip-rule="evenodd" />
                                </svg>
                            </button>
                        </div>
                    </form>
                </div>

                <!-- Right: User Actions & Language -->
                <div class="top-bar-actions">
                    <!-- Language Switcher -->
                    <div class="dropdown">
                        <button class="btn-language dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                            <svg class="hero-icon hero-icon-sm" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                                <path fill-rule="evenodd" d="M18 10a8 8 0 1 1-16 0 8 8 0 0 1 16 0ZM8.798 7.45c.512-.67 1.135-.95 1.702-.95s1.19.28 1.702.95a.75.75 0 0 0 1.192-.596C12.968 5.84 11.769 5.25 10.5 5.25s-2.468.59-2.894 1.604a.75.75 0 0 0 1.192.596ZM8.5 10a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0Zm6.5 1.5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3Zm-7.893 2.93a7.5 7.5 0 0 0 6.786 0 .75.75 0 1 0-.786-1.272 6 6 0 0 1-5.214 0 .75.75 0 0 0-.786 1.271Z" clip-rule="evenodd" />
                            </svg>
                            <span>VI</span>
                        </button>
                        <ul class="dropdown-menu dropdown-menu-end">
                            <li>
                                <a class="dropdown-item active" href="#" data-lang="vi">
                                    <img src="https://flagcdn.com/w20/vn.png" alt="Ti·∫øng Vi·ªát" class="flag-icon">
                                    Ti·∫øng Vi·ªát
                                </a>
                            </li>
                            <li>
                                <a class="dropdown-item" href="#" data-lang="en">
                                    <img src="https://flagcdn.com/w20/us.png" alt="English" class="flag-icon">
                                    English
                                </a>
                            </li>
                        </ul>
                    </div>

                    <!-- Auth Links (Not logged in) -->
                    <div class="auth-actions" th:if="${isUserAuthenticated == null || !isUserAuthenticated}">
                        <a href="/login" class="auth-link">
                            <svg class="hero-icon hero-icon-sm" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                                <path fill-rule="evenodd" d="M3 4.25A2.25 2.25 0 0 1 5.25 2h5.5A2.25 2.25 0 0 1 13 4.25v2a.75.75 0 0 1-1.5 0v-2a.75.75 0 0 0-.75-.75h-5.5a.75.75 0 0 0-.75.75v11.5c0 .414.336.75.75.75h5.5a.75.75 0 0 0 .75-.75v-2a.75.75 0 0 1 1.5 0v2A2.25 2.25 0 0 1 10.75 18h-5.5A2.25 2.25 0 0 1 3 15.75V4.25Z" clip-rule="evenodd" />
                                <path fill-rule="evenodd" d="M19 10a.75.75 0 0 0-.75-.75H8.704l1.048-.943a.75.75 0 1 0-1.004-1.114l-2.5 2.25a.75.75 0 0 0 0 1.114l2.5 2.25a.75.75 0 1 0 1.004-1.114L8.704 10.75H18.25A.75.75 0 0 0 19 10Z" clip-rule="evenodd" />
                            </svg>
                            <span>ƒêƒÉng nh·∫≠p</span>
                        </a>
                        <a href="/register" class="auth-link register">
                            <svg class="hero-icon hero-icon-sm" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                                <path d="M11 5a3 3 0 1 1-6 0 3 3 0 0 1 6 0ZM2.615 16.428a1.224 1.224 0 0 1-.569-1.175 6.002 6.002 0 0 1 11.908 0c.058.467-.172.92-.57 1.174A9.953 9.953 0 0 1 8 18a9.953 9.953 0 0 1-5.385-1.572ZM16.25 5.75a.75.75 0 0 0-1.5 0v2h-2a.75.75 0 0 0 0 1.5h2v2a.75.75 0 0 0 1.5 0v-2h2a.75.75 0 0 0 0-1.5h-2v-2Z" />
                            </svg>
                            <span>ƒêƒÉng k√Ω</span>
                        </a>
                    </div>

                    <!-- User Menu (Logged in) -->
                    <div class="dropdown" th:if="${isUserAuthenticated != null && isUserAuthenticated}">
                        <button class="btn-user dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                            <img th:if="${userObject != null and userObject.avatar != null}" 
                                 th:src="${userObject.avatar}" 
                                 alt="Avatar" 
                                 class="user-avatar-img" 
                                 style="width: 32px; height: 32px; border-radius: 50%; object-fit: cover; margin-right: 8px;"
                                 onerror="this.style.display='none'; this.nextElementSibling.style.display='inline-block';">
                            <svg th:if="${userObject == null or userObject.avatar == null}" class="hero-icon hero-icon-lg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" style="display: inline-block;">
                                <path fill-rule="evenodd" d="M18 10a8 8 0 1 1-16 0 8 8 0 0 1 16 0Zm-5.5-2.5a2.5 2.5 0 1 1-5 0 2.5 2.5 0 0 1 5 0ZM10 12a5.99 5.99 0 0 0-4.793 2.39A6.483 6.483 0 0 0 10 16.5a6.483 6.483 0 0 0 4.793-2.11A5.99 5.99 0 0 0 10 12Z" clip-rule="evenodd" />
                            </svg>
                            <svg class="hero-icon hero-icon-lg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" style="display: none;">
                                <path fill-rule="evenodd" d="M18 10a8 8 0 1 1-16 0 8 8 0 0 1 16 0Zm-5.5-2.5a2.5 2.5 0 1 1-5 0 2.5 2.5 0 0 1 5 0ZM10 12a5.99 5.99 0 0 0-4.793 2.39A6.483 6.483 0 0 0 10 16.5a6.483 6.483 0 0 0 4.793-2.11A5.99 5.99 0 0 0 10 12Z" clip-rule="evenodd" />
                            </svg>
                            <span th:text="${userObject != null ? userObject.fullName : currentUser}">User</span>
                            <svg class="hero-icon hero-icon-sm" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                                <path fill-rule="evenodd" d="M5.22 8.22a.75.75 0 0 1 1.06 0L10 11.94l3.72-3.72a.75.75 0 1 1 1.06 1.06l-4.25 4.25a.75.75 0 0 1-1.06 0L5.22 9.28a.75.75 0 0 1 0-1.06Z" clip-rule="evenodd" />
                            </svg>
                        </button>
                        <ul class="dropdown-menu dropdown-menu-end user-dropdown">
                            <li class="dropdown-header">
                                <img th:if="${userObject != null and userObject.avatar != null}" 
                                     th:src="${userObject.avatar}" 
                                     alt="Avatar" 
                                     style="width: 40px; height: 40px; border-radius: 50%; object-fit: cover; margin-right: 12px;"
                                     onerror="this.style.display='none'; this.nextElementSibling.style.display='inline-block';">
                                <svg th:if="${userObject == null or userObject.avatar == null}" class="hero-icon hero-icon-xl" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" style="display: inline-block;">
                                    <path fill-rule="evenodd" d="M18 10a8 8 0 1 1-16 0 8 8 0 0 1 16 0Zm-5.5-2.5a2.5 2.5 0 1 1-5 0 2.5 2.5 0 0 1 5 0ZM10 12a5.99 5.99 0 0 0-4.793 2.39A6.483 6.483 0 0 0 10 16.5a6.483 6.483 0 0 0 4.793-2.11A5.99 5.99 0 0 0 10 12Z" clip-rule="evenodd" />
                                </svg>
                                <svg class="hero-icon hero-icon-xl" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" style="display: none;">
                                    <path fill-rule="evenodd" d="M18 10a8 8 0 1 1-16 0 8 8 0 0 1 16 0Zm-5.5-2.5a2.5 2.5 0 1 1-5 0 2.5 2.5 0 0 1 5 0ZM10 12a5.99 5.99 0 0 0-4.793 2.39A6.483 6.483 0 0 0 10 16.5a6.483 6.483 0 0 0 4.793-2.11A5.99 5.99 0 0 0 10 12Z" clip-rule="evenodd" />
                                </svg>
                                <div>
                                    <div class="user-name" th:text="${userObject != null ? userObject.fullName : currentUser}">User</div>
                                    <small class="user-email" th:text="${userObject != null ? userObject.email : currentUser}">user@email.com</small>
                                </div>
                            </li>
                            <li><hr class="dropdown-divider"></li>
                            <li><a class="dropdown-item" href="/account/profile">
                                <svg class="hero-icon hero-icon-sm" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                                    <path d="M10 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6ZM3.465 14.493a1.23 1.23 0 0 0 .41 1.412A9.957 9.957 0 0 0 10 18c2.31 0 4.438-.784 6.131-2.1.43-.333.604-.903.408-1.41a7.002 7.002 0 0 0-13.074.003Z" />
                                </svg> Th√¥ng tin c√° nh√¢n
                            </a></li>
                            <li><a class="dropdown-item" href="/account/orders">
                                <svg class="hero-icon hero-icon-sm" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                                    <path fill-rule="evenodd" d="M6 5v1H4.667a1.75 1.75 0 0 0-1.743 1.598l-.826 9.5A1.75 1.75 0 0 0 3.84 19h12.32a1.75 1.75 0 0 0 1.742-1.902l-.826-9.5A1.75 1.75 0 0 0 15.333 6H14V5a4 4 0 0 0-8 0Zm4-2.5A2.5 2.5 0 0 0 7.5 5v1h5V5A2.5 2.5 0 0 0 10 2.5Z" clip-rule="evenodd" />
                                </svg> ƒê∆°n h√†ng c·ªßa t√¥i
                            </a></li>
                            <li><a class="dropdown-item" href="/wishlist">
                                <svg class="hero-icon hero-icon-sm" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                                    <path d="m9.653 16.915-.005-.003-.019-.01a20.759 20.759 0 0 1-1.162-.682 22.045 22.045 0 0 1-2.582-1.9C4.045 12.733 2 10.352 2 7.5a4.5 4.5 0 0 1 8-2.828A4.5 4.5 0 0 1 18 7.5c0 2.852-2.044 5.233-3.885 6.82a22.049 22.049 0 0 1-3.744 2.582l-.019.01-.005.003h-.002a.739.739 0 0 1-.69.001l-.002-.001Z" />
                                </svg> Danh s√°ch y√™u th√≠ch
                            </a></li>
                            <li><a class="dropdown-item" href="/account/settings">
                                <svg class="hero-icon hero-icon-sm" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                                    <path fill-rule="evenodd" d="M7.84 1.804A1 1 0 0 1 8.82 1h2.36a1 1 0 0 1 .98.804l.331 1.652a6.993 6.993 0 0 1 1.929 1.115l1.598-.54a1 1 0 0 1 1.186.447l1.18 2.044a1 1 0 0 1-.205 1.251l-1.267 1.113a7.047 7.047 0 0 1 0 2.228l1.267 1.113a1 1 0 0 1 .206 1.25l-1.18 2.045a1 1 0 0 1-1.187.447l-1.598-.54a6.993 6.993 0 0 1-1.929 1.115l-.33 1.652a1 1 0 0 1-.98.804H8.82a1 1 0 0 1-.98-.804l-.331-1.652a6.993 6.993 0 0 1-1.929-1.115l-1.598.54a1 1 0 0 1-1.186-.447l-1.18-2.044a1 1 0 0 1 .205-1.251l1.267-1.114a7.05 7.05 0 0 1 0-2.227L1.821 7.773a1 1 0 0 1-.206-1.25l1.18-2.045a1 1 0 0 1 1.187-.447l1.598.54A6.992 6.992 0 0 1 7.51 3.456l.33-1.652ZM10 13a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z" clip-rule="evenodd" />
                                </svg> C√†i ƒë·∫∑t
                            </a></li>
                            <li><hr class="dropdown-divider"></li>
                            <!-- Desktop Logout -->
                            <li>
                                <a href="/logout" class="dropdown-item text-danger" onclick="return confirm('B·∫°n c√≥ ch·∫Øc mu·ªën ƒëƒÉng xu·∫•t?')">
                                    <svg class="hero-icon hero-icon-sm" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                                        <path fill-rule="evenodd" d="M3 4.25A2.25 2.25 0 0 1 5.25 2h5.5A2.25 2.25 0 0 1 13 4.25v2a.75.75 0 0 1-1.5 0v-2a.75.75 0 0 0-.75-.75h-5.5a.75.75 0 0 0-.75.75v11.5c0 .414.336.75.75.75h5.5a.75.75 0 0 0 .75-.75v-2a.75.75 0 0 1 1.5 0v2A2.25 2.25 0 0 1 10.75 18h-5.5A2.25 2.25 0 0 1 3 15.75V4.25Z" clip-rule="evenodd" />
                                        <path fill-rule="evenodd" d="M6 10a.75.75 0 0 1 .75-.75h9.546l-1.048-.943a.75.75 0 1 1 1.004-1.114l2.5 2.25a.75.75 0 0 1 0 1.114l-2.5 2.25a.75.75 0 1 1-1.004-1.114l1.048-.943H6.75A.75.75 0 0 1 6 10Z" clip-rule="evenodd" />
                                    </svg> ƒêƒÉng xu·∫•t
                                </a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Header - Logo, Navigation & Actions -->
    <header class="main-header">
        <div class="container">
            <div class="main-header-content">
                <!-- Navigation Section -->
                <div class="nav-section">
                    <!-- Navigation Menu -->
                    <nav class="header-nav d-none d-lg-flex">
                        <ul class="nav-menu">
                            <li class="nav-item">
                                <a href="/" class="nav-link" th:classappend="${currentPath != null and currentPath == '/' ? 'active' : ''}">
                                    <svg class="hero-icon hero-icon-sm" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                                        <path fill-rule="evenodd" d="M9.293 2.293a1 1 0 0 1 1.414 0l7 7A1 1 0 0 1 17 11h-1v6a1 1 0 0 1-1 1h-2a1 1 0 0 1-1-1v-3a1 1 0 0 0-1-1H9a1 1 0 0 0-1 1v3a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-6H3a1 1 0 0 1-.707-1.707l7-7Z" clip-rule="evenodd" />
                                    </svg>
                                    <span>Trang ch·ªß</span>
                                </a>
                            </li>
                            <li class="nav-item dropdown-hover">
                                <a href="/categories" class="nav-link">
                                    <svg class="hero-icon hero-icon-sm" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                                        <path d="M5.25 12a.75.75 0 0 1 .75-.75h.01a.75.75 0 0 1 .75.75v.01a.75.75 0 0 1-.75.75H6a.75.75 0 0 1-.75-.75V12ZM6 13.25a.75.75 0 0 0-.75.75v.01c0 .414.336.75.75.75h.01a.75.75 0 0 0 .75-.75V14a.75.75 0 0 0-.75-.75H6ZM7.25 12a.75.75 0 0 1 .75-.75h.01a.75.75 0 0 1 .75.75v.01a.75.75 0 0 1-.75.75H8a.75.75 0 0 1-.75-.75V12ZM8 13.25a.75.75 0 0 0-.75.75v.01c0 .414.336.75.75.75h.01a.75.75 0 0 0 .75-.75V14a.75.75 0 0 0-.75-.75H8ZM9.25 12a.75.75 0 0 1 .75-.75h.01a.75.75 0 0 1 .75.75v.01a.75.75 0 0 1-.75.75H10a.75.75 0 0 1-.75-.75V12ZM10 13.25a.75.75 0 0 0-.75.75v.01c0 .414.336.75.75.75h.01a.75.75 0 0 0 .75-.75V14a.75.75 0 0 0-.75-.75H10ZM9.25 14a.75.75 0 0 1 .75-.75h.01a.75.75 0 0 1 .75.75v.01a.75.75 0 0 1-.75.75H10a.75.75 0 0 1-.75-.75V14ZM12 9.25a.75.75 0 0 0-.75.75v.01c0 .414.336.75.75.75h.01a.75.75 0 0 0 .75-.75V10a.75.75 0 0 0-.75-.75H12ZM11.25 12a.75.75 0 0 1 .75-.75h.01a.75.75 0 0 1 .75.75v.01a.75.75 0 0 1-.75.75H12a.75.75 0 0 1-.75-.75V12ZM12 13.25a.75.75 0 0 0-.75.75v.01c0 .414.336.75.75.75h.01a.75.75 0 0 0 .75-.75V14a.75.75 0 0 0-.75-.75H12ZM13.25 10a.75.75 0 0 1 .75-.75h.01a.75.75 0 0 1 .75.75v.01a.75.75 0 0 1-.75.75H14a.75.75 0 0 1-.75-.75V10ZM14 11.25a.75.75 0 0 0-.75.75v.01c0 .414.336.75.75.75h.01a.75.75 0 0 0 .75-.75V12a.75.75 0 0 0-.75-.75H14ZM13.25 12a.75.75 0 0 1 .75-.75h.01a.75.75 0 0 1 .75.75v.01a.75.75 0 0 1-.75.75H14a.75.75 0 0 1-.75-.75V12ZM14 13.25a.75.75 0 0 0-.75.75v.01c0 .414.336.75.75.75h.01a.75.75 0 0 0 .75-.75V14a.75.75 0 0 0-.75-.75H14ZM15.25 10a.75.75 0 0 1 .75-.75h.01a.75.75 0 0 1 .75.75v.01a.75.75 0 0 1-.75.75H16a.75.75 0 0 1-.75-.75V10ZM16 11.25a.75.75 0 0 0-.75.75v.01c0 .414.336.75.75.75h.01a.75.75 0 0 0 .75-.75V12a.75.75 0 0 0-.75-.75H16ZM15.25 12a.75.75 0 0 1 .75-.75h.01a.75.75 0 0 1 .75.75v.01a.75.75 0 0 1-.75.75H16a.75.75 0 0 1-.75-.75V12ZM16 13.25a.75.75 0 0 0-.75.75v.01c0 .414.336.75.75.75h.01a.75.75 0 0 0 .75-.75V14a.75.75 0 0 0-.75-.75H16Z" />
                                    </svg>
                                    <span>Danh m·ª•c hoa</span>
                                    <svg class="hero-icon hero-icon-sm dropdown-arrow" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                                        <path fill-rule="evenodd" d="M5.22 8.22a.75.75 0 0 1 1.06 0L10 11.94l3.72-3.72a.75.75 0 1 1 1.06 1.06l-4.25 4.25a.75.75 0 0 1-1.06 0L5.22 9.28a.75.75 0 0 1 0-1.06Z" clip-rule="evenodd" />
                                    </svg>
                                </a>
                                <ul class="dropdown-menu">
                                    <li><a class="dropdown-item" href="/categories/sinh-nhat">
                                        <svg class="hero-icon hero-icon-sm" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                                            <path d="M9.653 16.915-.005-.003-.019-.01a20.759 20.759 0 0 1-1.162-.682 22.045 22.045 0 0 1-2.582-1.9C4.045 12.733 2 10.352 2 7.5a4.5 4.5 0 0 1 8-2.828A4.5 4.5 0 0 1 18 7.5c0 2.852-2.044 5.233-3.885 6.82a22.049 22.049 0 0 1-3.744 2.582l-.019.01-.005.003h-.002a.739.739 0 0 1-.69.001l-.002-.001Z" />
                                        </svg> Hoa sinh nh·∫≠t
                                    </a></li>
                                    <li><a class="dropdown-item" href="/categories/tinh-yeu">
                                        <svg class="hero-icon hero-icon-sm" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                                            <path d="m9.653 16.915-.005-.003-.019-.01a20.759 20.759 0 0 1-1.162-.682 22.045 22.045 0 0 1-2.582-1.9C4.045 12.733 2 10.352 2 7.5a4.5 4.5 0 0 1 8-2.828A4.5 4.5 0 0 1 18 7.5c0 2.852-2.044 5.233-3.885 6.82a22.049 22.049 0 0 1-3.744 2.582l-.019.01-.005.003h-.002a.739.739 0 0 1-.69.001l-.002-.001Z" />
                                        </svg> Hoa t√¨nh y√™u
                                    </a></li>
                                    <li><a class="dropdown-item" href="/categories/cuoi">
                                        <svg class="hero-icon hero-icon-sm" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                                            <path d="m9.653 16.915-.005-.003-.019-.01a20.759 20.759 0 0 1-1.162-.682 22.045 22.045 0 0 1-2.582-1.9C4.045 12.733 2 10.352 2 7.5a4.5 4.5 0 0 1 8-2.828A4.5 4.5 0 0 1 18 7.5c0 2.852-2.044 5.233-3.885 6.82a22.049 22.049 0 0 1-3.744 2.582l-.019.01-.005.003h-.002a.739.739 0 0 1-.69.001l-.002-.001Z" />
                                        </svg> Hoa c∆∞·ªõi
                                    </a></li>
                                    <li><a class="dropdown-item" href="/categories/khai-truong">
                                        <svg class="hero-icon hero-icon-sm" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                                            <path fill-rule="evenodd" d="M10.868 2.884c-.321-.772-1.415-.772-1.736 0l-1.83 4.401-4.753.381c-.833.067-1.171 1.107-.536 1.651l3.62 3.102-1.106 4.637c-.194.813.691 1.456 1.405 1.02L10 15.591l4.069 2.485c.713.436 1.598-.207 1.404-1.02l-1.106-4.637 3.62-3.102c.635-.544.297-1.584-.536-1.65l-4.752-.382-1.831-4.401Z" clip-rule="evenodd" />
                                        </svg> Hoa khai tr∆∞∆°ng
                                    </a></li>
                                    <li><a class="dropdown-item" href="/categories/chia-buon">
                                        <i class="bi bi-flower1"></i> Hoa chia bu·ªìn
                                    </a></li>
                                    <li><a class="dropdown-item" href="/categories/tang-me">
                                        <i class="bi bi-heart-fill"></i> Hoa t·∫∑ng m·∫π
                                    </a></li>
                                </ul>
                            </li>
                            <li class="nav-item">
                                <a href="/products" class="nav-link" th:classappend="${currentPath != null and #strings.startsWith(currentPath, '/products') ? 'active' : ''}">
                                    <i class="bi bi-flower2"></i>
                                    <span>S·∫£n ph·∫©m</span>
                                </a>
                            </li>
                            <li class="nav-item">
                                <a href="/gifts" class="nav-link" th:classappend="${currentPath != null and #strings.startsWith(currentPath, '/gifts') ? 'active' : ''}">
                                    <i class="bi bi-gift"></i>
                                    <span>Qu√† t·∫∑ng</span>
                                </a>
                            </li>
                            <li class="nav-item">
                                <a href="/occasions" class="nav-link" th:classappend="${currentPath != null and #strings.startsWith(currentPath, '/occasions') ? 'active' : ''}">
                                    <i class="bi bi-calendar-event"></i>
                                    <span>D·ªãp ƒë·∫∑c bi·ªát</span>
                                </a>
                            </li>
                            <li class="nav-item">
                                <a href="/blog" class="nav-link" th:classappend="${currentPath != null and #strings.startsWith(currentPath, '/blog') ? 'active' : ''}">
                                    <i class="bi bi-journal-text"></i>
                                    <span>Blog</span>
                                </a>
                            </li>
                            <li class="nav-item">
                                <a href="/contact" class="nav-link" th:classappend="${currentPath != null and currentPath == '/contact' ? 'active' : ''}">
                                    <i class="bi bi-telephone"></i>
                                    <span>Li√™n h·ªá</span>
                                </a>
                            </li>
                        </ul>
                    </nav>
                </div>

                <!-- Actions Section -->
                <div class="actions-section">
                    <!-- Wishlist -->
                    <a href="/wishlist" class="action-btn" title="Danh s√°ch y√™u th√≠ch" th:if="${isUserAuthenticated != null && isUserAuthenticated}">
                        <i class="bi bi-heart"></i>
                        <span class="action-badge" th:if="${wishlistCount > 0}" th:text="${wishlistCount}">0</span>
                    </a>

                    <!-- Shopping Cart -->
                    <a href="/cart" class="action-btn" title="Gi·ªè h√†ng" th:if="${isUserAuthenticated != null && isUserAuthenticated}">
                        <i class="bi bi-bag"></i>
                        <span class="action-badge" th:if="${cartCount > 0}" th:text="${cartCount}">0</span>
                    </a>

                    <!-- Mobile Menu Toggle -->
                    <button class="mobile-menu-btn d-lg-none" type="button" data-bs-toggle="offcanvas" data-bs-target="#mobileMenu">
                        <span class="hamburger-line"></span>
                        <span class="hamburger-line"></span>
                        <span class="hamburger-line"></span>
                    </button>
                </div>
            </div>

            <!-- Mobile Search -->
            <div class="mobile-search d-lg-none">
                <form class="search-form" action="/search" method="GET">
                    <div class="search-input-group">
                        <i class="bi bi-search search-icon"></i>
                        <input type="text" 
                               class="search-input" 
                               name="q" 
                               placeholder="T√¨m ki·∫øm hoa..."
                               th:value="${searchQuery}">
                        <button type="submit" class="search-btn">
                            <i class="bi bi-search"></i>
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </header>
</div>

<!-- Mobile Offcanvas Menu -->
<div class="offcanvas offcanvas-end" tabindex="-1" id="mobileMenu">
    <div class="offcanvas-header">
        <h5 class="offcanvas-title">
            StarShop <span class="heartbeat">üå∏</span>
        </h5>
        <button type="button" class="btn-close" data-bs-dismiss="offcanvas"></button>
    </div>
    <div class="offcanvas-body">
        <!-- User Section for Mobile -->
        <div class="mobile-user-section" th:if="${isUserAuthenticated != null && isUserAuthenticated}">
            <div class="user-info">
                <img th:if="${userObject != null and userObject.avatar != null}" 
                     th:src="${userObject.avatar}" 
                     alt="Avatar" 
                     style="width: 40px; height: 40px; border-radius: 50%; object-fit: cover; margin-right: 12px;"
                     onerror="this.style.display='none'; this.nextElementSibling.style.display='inline-block';">
                <i th:if="${userObject == null or userObject.avatar == null}" class="bi bi-person-circle" style="display: inline-block;"></i>
                <i class="bi bi-person-circle" style="display: none;"></i>
                <span th:text="${userObject != null ? userObject.fullName : currentUser}">User</span>
            </div>
            <hr>
        </div>

        <!-- Mobile Navigation -->
        <ul class="mobile-nav">
            <li><a href="/" class="mobile-nav-link">
                <i class="bi bi-house"></i> Trang ch·ªß
            </a></li>
            <li>
                <a href="#" class="mobile-nav-link mobile-dropdown-toggle">
                    <i class="bi bi-grid"></i> Danh m·ª•c hoa
                    <i class="bi bi-chevron-down"></i>
                </a>
                <ul class="mobile-submenu">
                    <li><a href="/categories/sinh-nhat">Hoa sinh nh·∫≠t</a></li>
                    <li><a href="/categories/tinh-yeu">Hoa t√¨nh y√™u</a></li>
                    <li><a href="/categories/cuoi">Hoa c∆∞·ªõi</a></li>
                    <li><a href="/categories/khai-truong">Hoa khai tr∆∞∆°ng</a></li>
                    <li><a href="/categories/chia-buon">Hoa chia bu·ªìn</a></li>
                    <li><a href="/categories/tang-me">Hoa t·∫∑ng m·∫π</a></li>
                </ul>
            </li>
            <li><a href="/products" class="mobile-nav-link">
                <i class="bi bi-flower2"></i> S·∫£n ph·∫©m
            </a></li>
            <li><a href="/gifts" class="mobile-nav-link">
                <i class="bi bi-gift"></i> Qu√† t·∫∑ng
            </a></li>
            <li><a href="/occasions" class="mobile-nav-link">
                <i class="bi bi-calendar-event"></i> D·ªãp ƒë·∫∑c bi·ªát
            </a></li>
            <li><a href="/blog" class="mobile-nav-link">
                <i class="bi bi-journal-text"></i> Blog
            </a></li>
            <li><a href="/contact" class="mobile-nav-link">
                <i class="bi bi-telephone"></i> Li√™n h·ªá
            </a></li>
        </ul>

        <!-- Mobile Language Switcher -->
        <div class="mobile-language-section">
            <hr>
            <div class="mobile-section-title">
                <i class="bi bi-globe"></i> Ng√¥n ng·ªØ
            </div>
            <div class="mobile-language-options">
                <a href="#" class="mobile-language-option active" data-lang="vi">
                    <img src="https://flagcdn.com/w20/vn.png" alt="Ti·∫øng Vi·ªát" class="flag-icon">
                    Ti·∫øng Vi·ªát
                </a>
                <a href="#" class="mobile-language-option" data-lang="en">
                    <img src="https://flagcdn.com/w20/us.png" alt="English" class="flag-icon">
                    English
                </a>
            </div>
        </div>

        <!-- Mobile Auth Links -->
        <div class="mobile-auth" th:if="${isUserAuthenticated == null || !isUserAuthenticated}">
            <hr>
            <a href="/login" class="btn btn-outline-primary w-100 mb-2">
                <i class="bi bi-box-arrow-in-right"></i> ƒêƒÉng nh·∫≠p
            </a>
            <a href="/register" class="btn btn-primary w-100 mb-2">
                <i class="bi bi-box-arrow-in-right"></i> ƒêƒÉng k√Ω
            </a>
        </div>

        <!-- Mobile User Actions -->
        <div class="mobile-user-actions" th:if="${isUserAuthenticated != null && isUserAuthenticated}">
            <hr>
            <a href="/account/profile" class="mobile-nav-link">
                <i class="bi bi-person"></i> Th√¥ng tin c√° nh√¢n
            </a>
            <a href="/account/orders" class="mobile-nav-link">
                <i class="bi bi-bag"></i> ƒê∆°n h√†ng c·ªßa t√¥i
            </a>
            <a href="/wishlist" class="mobile-nav-link">
                <i class="bi bi-heart"></i> Danh s√°ch y√™u th√≠ch
            </a>
            <a href="/logout" class="mobile-nav-link text-danger" onclick="return confirm('B·∫°n c√≥ ch·∫Øc mu·ªën ƒëƒÉng xu·∫•t?')">
                <i class="bi bi-box-arrow-right"></i> ƒêƒÉng xu·∫•t
            </a>
{{ ... }}
    </div>
</div>

</body>
</html>
