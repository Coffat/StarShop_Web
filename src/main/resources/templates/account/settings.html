<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" 
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
      th:replace="~{layouts/main :: layout('Cài đặt tài khoản', 
          'Cài đặt và quản lý tùy chọn tài khoản StarShop của bạn. Thay đổi mật khẩu, thông báo và các tùy chọn bảo mật.',
          ~{::link},
          ~{::content})}">

<head>
</head>

<body>
<th:block th:fragment="content">
    <!-- Page Header -->
    <section class="bg-gradient-to-r from-blue-50 to-indigo-50 py-8">
        <div class="container mx-auto px-4">
            <div class="max-w-7xl mx-auto">
                <!-- Breadcrumb -->
                <nav class="mb-4" aria-label="breadcrumb">
                    <ol class="flex items-center space-x-2 text-sm">
                        <li>
                            <a href="/" class="text-gray-600 hover:text-blue-600 transition-colors flex items-center">
                                <svg class="w-4 h-4 mr-1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                                    <path fill-rule="evenodd" d="M9.293 2.293a1 1 0 0 1 1.414 0l7 7A1 1 0 0 1 17 11h-1v6a1 1 0 0 1-1 1h-2a1 1 0 0 1-1-1v-3a1 1 0 0 0-1-1H9a1 1 0 0 0-1 1v3a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-6H3a1 1 0 0 1-.707-1.707l7-7Z" clip-rule="evenodd" />
                                </svg>
                                Trang chủ
                            </a>
                        </li>
                        <li class="text-gray-400">/</li>
                        <li>
                            <a href="/account/profile" class="text-gray-600 hover:text-blue-600 transition-colors">Tài khoản</a>
                        </li>
                        <li class="text-gray-400">/</li>
                        <li class="text-gray-900 font-medium" aria-current="page">Cài đặt</li>
                    </ol>
                </nav>
                
                <!-- Page Title -->
                <div>
                    <h1 class="text-3xl font-bold text-gray-900 flex items-center">
                        <svg class="w-8 h-8 mr-3 text-blue-600" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                            <path fill-rule="evenodd" d="M7.84 1.804A1 1 0 0 1 8.82 1h2.36a1 1 0 0 1 .98.804l.331 1.652a6.993 6.993 0 0 1 1.929 1.115l1.598-.54a1 1 0 0 1 1.186.447l1.18 2.044a1 1 0 0 1-.205 1.251l-1.267 1.113a7.047 7.047 0 0 1 0 2.228l1.267 1.113a1 1 0 0 1 .206 1.25l-1.18 2.045a1 1 0 0 1-1.187.447l-1.598-.54a6.993 6.993 0 0 1-1.929 1.115l-.33 1.652a1 1 0 0 1-.98.804H8.82a1 1 0 0 1-.98-.804l-.331-1.652a6.993 6.993 0 0 1-1.929-1.115l-1.598.54a1 1 0 0 1-1.186-.447l-1.18-2.044a1 1 0 0 1 .205-1.251l1.267-1.114a7.05 7.05 0 0 1 0-2.227L1.821 7.773a1 1 0 0 1-.206-1.25l1.18-2.045a1 1 0 0 1 1.187-.447l1.598.54A6.992 6.992 0 0 1 7.51 3.456l.33-1.652ZM10 13a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z" clip-rule="evenodd" />
                        </svg>
                        Cài đặt tài khoản
                    </h1>
                    <p class="mt-2 text-gray-600">Quản lý các tùy chọn và cài đặt bảo mật</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Settings Content -->
    <section class="bg-gray-50 py-12">
        <div class="container mx-auto px-4">
            <div class="max-w-7xl mx-auto">
                <div class="grid grid-cols-1 lg:grid-cols-4 gap-8">
                    
                    <!-- Sidebar Navigation -->
                    <div class="lg:col-span-1">
                        <div th:replace="~{fragments/account-sidebar :: sidebar(activePage='settings')}"></div>
                    </div>

                    <!-- Main Content -->
                    <div class="lg:col-span-3">
                        <div class="space-y-6">
                        <!-- Security Settings -->
                        <div class="bg-white rounded-lg shadow-md overflow-hidden">
                            <div class="p-6 border-b border-gray-200">
                                <h2 class="text-xl font-semibold text-gray-900 flex items-center">
                                    <svg class="w-6 h-6 mr-3 text-gray-500" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                                        <path fill-rule="evenodd" d="M10 1a4.5 4.5 0 0 0-4.5 4.5V9H5a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2v-6a2 2 0 0 0-2-2h-.5V5.5A4.5 4.5 0 0 0 10 1Zm3 8V5.5a3 3 0 1 0-6 0V9h6Z" clip-rule="evenodd" />
                                    </svg>
                                    Bảo mật tài khoản
                                </h2>
                            </div>
                            <div class="p-6">
                                <div class="settings-section">
                                    <div class="flex items-center justify-between py-4 border-b border-gray-100 last:border-0">
                                        <div class="flex-1">
                                            <h4 class="text-base font-semibold text-gray-900">Thay đổi mật khẩu</h4>
                                            <p class="text-sm text-gray-600 mt-1">Cập nhật mật khẩu để bảo vệ tài khoản của bạn</p>
                                        </div>
                                        <button class="inline-flex items-center px-4 py-2 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors duration-200" data-bs-toggle="modal" data-bs-target="#changePasswordModal">
                                            <svg class="w-5 h-5 mr-2" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                                                <path fill-rule="evenodd" d="M8 7a3 3 0 1 1 6 0v1h1a2 2 0 0 1 2 2v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-6a2 2 0 0 1 2-2h1V7Zm3-1a1 1 0 0 0-1 1v1h2V7a1 1 0 0 0-1-1Z" clip-rule="evenodd" />
                                            </svg>
                                            Đổi mật khẩu
                                        </button>
                                    </div>
                                    
                                    <div class="flex items-center justify-between py-4 border-b border-gray-100 last:border-0">
                                        <div class="flex-1">
                                            <h4 class="text-base font-semibold text-gray-900">Xác thực hai yếu tố (2FA)</h4>
                                            <p class="text-sm text-gray-600 mt-1">Tăng cường bảo mật với xác thực hai yếu tố</p>
                                        </div>
                                        <label class="relative inline-flex items-center cursor-pointer">
                                            <input type="checkbox" id="enable2fa" class="sr-only peer">
                                            <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"></div>
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Notification Settings -->
                        <div class="content-card">
                            <div class="card-header">
                                <h2 class="card-title">
                                    <i class="bi bi-bell"></i>
                                    Thông báo
                                </h2>
                            </div>
                            <div class="card-body">
                                <div class="settings-section">
                                    <div class="setting-item">
                                        <div class="setting-info">
                                            <h4 class="setting-title">Email thông báo</h4>
                                            <p class="setting-desc">Nhận thông báo về đơn hàng và khuyến mãi qua email</p>
                                        </div>
                                        <div class="toggle-switch">
                                            <input type="checkbox" id="emailNotif" class="toggle-input" checked>
                                            <label for="emailNotif" class="toggle-label">
                                                <span class="toggle-slider"></span>
                                            </label>
                                        </div>
                                    </div>
                                    
                                    <div class="setting-item">
                                        <div class="setting-info">
                                            <h4 class="setting-title">SMS thông báo</h4>
                                            <p class="setting-desc">Nhận thông báo quan trọng qua tin nhắn</p>
                                        </div>
                                        <div class="toggle-switch">
                                            <input type="checkbox" id="smsNotif" class="toggle-input">
                                            <label for="smsNotif" class="toggle-label">
                                                <span class="toggle-slider"></span>
                                            </label>
                                        </div>
                                    </div>
                                    
                                    <div class="setting-item">
                                        <div class="setting-info">
                                            <h4 class="setting-title">Thông báo khuyến mãi</h4>
                                            <p class="setting-desc">Nhận thông tin về các chương trình ưu đãi</p>
                                        </div>
                                        <div class="toggle-switch">
                                            <input type="checkbox" id="promoNotif" class="toggle-input" checked>
                                            <label for="promoNotif" class="toggle-label">
                                                <span class="toggle-slider"></span>
                                            </label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Privacy Settings -->
                        <div class="content-card">
                            <div class="card-header">
                                <h2 class="card-title">
                                    <i class="bi bi-eye-slash"></i>
                                    Quyền riêng tư
                                </h2>
                            </div>
                            <div class="card-body">
                                <div class="settings-section">
                                    <div class="setting-item">
                                        <div class="setting-info">
                                            <h4 class="setting-title">Hiển thị thông tin cá nhân</h4>
                                            <p class="setting-desc">Cho phép hiển thị thông tin trong danh sách khách hàng</p>
                                        </div>
                                        <div class="toggle-switch">
                                            <input type="checkbox" id="showProfile" class="toggle-input" checked>
                                            <label for="showProfile" class="toggle-label">
                                                <span class="toggle-slider"></span>
                                            </label>
                                        </div>
                                    </div>
                                    
                                    <div class="setting-item">
                                        <div class="setting-info">
                                            <h4 class="setting-title">Lưu lịch sử duyệt web</h4>
                                            <p class="setting-desc">Lưu trữ lịch sử xem sản phẩm để cải thiện trải nghiệm</p>
                                        </div>
                                        <div class="toggle-switch">
                                            <input type="checkbox" id="saveHistory" class="toggle-input" checked>
                                            <label for="saveHistory" class="toggle-label">
                                                <span class="toggle-slider"></span>
                                            </label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Danger Zone -->
                        <div class="content-card danger-zone">
                            <div class="card-header">
                                <h2 class="card-title">
                                    <i class="bi bi-exclamation-triangle"></i>
                                    Vùng nguy hiểm
                                </h2>
                            </div>
                            <div class="card-body">
                                <div class="settings-section">
                                    <div class="setting-item">
                                        <div class="setting-info">
                                            <h4 class="setting-title">Xóa tài khoản</h4>
                                            <p class="setting-desc">Xóa vĩnh viễn tài khoản và toàn bộ dữ liệu liên quan</p>
                                        </div>
                                        <button class="btn-danger" data-bs-toggle="modal" data-bs-target="#deleteAccountModal">
                                            <i class="bi bi-trash"></i>
                                            Xóa tài khoản
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
                
            </div>
        </div>
    </section>

    <!-- Change Password Modal -->
    <div class="modal fade" id="changePasswordModal" tabindex="-1" aria-labelledby="changePasswordModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="changePasswordModalLabel">
                        <i class="bi bi-key"></i>
                        Thay đổi mật khẩu
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="changePasswordForm">
                        <div class="mb-3">
                            <label for="currentPassword" class="form-label">Mật khẩu hiện tại</label>
                            <input type="password" class="form-control" id="currentPassword" required>
                        </div>
                        <div class="mb-3">
                            <label for="newPassword" class="form-label">Mật khẩu mới</label>
                            <input type="password" class="form-control" id="newPassword" required>
                        </div>
                        <div class="mb-3">
                            <label for="confirmPassword" class="form-label">Xác nhận mật khẩu mới</label>
                            <input type="password" class="form-control" id="confirmPassword" required>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Hủy</button>
                    <button type="button" class="btn btn-primary">
                        <i class="bi bi-check2"></i>
                        Cập nhật mật khẩu
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Delete Account Modal -->
    <div class="modal fade" id="deleteAccountModal" tabindex="-1" aria-labelledby="deleteAccountModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title text-danger" id="deleteAccountModalLabel">
                        <i class="bi bi-exclamation-triangle"></i>
                        Xác nhận xóa tài khoản
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="alert alert-danger">
                        <strong>Cảnh báo!</strong> Hành động này không thể hoàn tác.
                    </div>
                    <p>Bạn có chắc chắn muốn xóa tài khoản? Tất cả dữ liệu bao gồm:</p>
                    <ul>
                        <li>Thông tin cá nhân</li>
                        <li>Lịch sử đơn hàng</li>
                        <li>Danh sách yêu thích</li>
                        <li>Địa chỉ giao hàng</li>
                    </ul>
                    <p>sẽ bị xóa vĩnh viễn.</p>
                    
                    <div class="mt-3">
                        <label for="confirmDelete" class="form-label">Nhập <strong>XÓA TÀI KHOẢN</strong> để xác nhận:</label>
                        <input type="text" class="form-control" id="confirmDelete" placeholder="XÓA TÀI KHOẢN">
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Hủy</button>
                    <button type="button" class="btn btn-danger" id="confirmDeleteBtn" disabled>
                        <i class="bi bi-trash"></i>
                        Xóa tài khoản vĩnh viễn
                    </button>
                </div>
            </div>
        </div>
    </div>

</th:block>
</body>
</html>
