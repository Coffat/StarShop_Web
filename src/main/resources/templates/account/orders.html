<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" 
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
      th:replace="~{layouts/main :: layout('Lịch sử đơn hàng', 
          'Theo dõi và quản lý lịch sử đơn hàng StarShop của bạn. Xem chi tiết, trạng thái giao hàng và đánh giá sản phẩm.',
          ~{::link},
          ~{::content})}">

<head>
    <link rel="stylesheet" href="/css/account.css">
</head>

<body>
<th:block th:fragment="content">
    <!-- Page Header -->
    <section class="page-header">
        <div class="container">
            <div class="header-content">
                <div class="breadcrumb-wrapper">
                    <nav aria-label="breadcrumb">
                        <ol class="breadcrumb">
                            <li class="breadcrumb-item">
                                <a href="/" class="breadcrumb-link">
                                    <i class="bi bi-house"></i>
                                    Trang chủ
                                </a>
                            </li>
                            <li class="breadcrumb-item">
                                <a href="/account/profile" class="breadcrumb-link">Tài khoản</a>
                            </li>
                            <li class="breadcrumb-item active" aria-current="page">Lịch sử đơn hàng</li>
                        </ol>
                    </nav>
                </div>
                <div class="page-title-section">
                    <h1 class="page-title">
                        <span class="title-icon">
                            <i class="bi bi-bag-check"></i>
                        </span>
                        Lịch sử đơn hàng
                    </h1>
                    <p class="page-subtitle">Theo dõi và quản lý tất cả đơn hàng của bạn</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Orders Content -->
    <section class="account-section">
        <div class="container">
            <div class="row g-4">
                
                <!-- Sidebar Navigation -->
                <div class="col-lg-3">
                    <div class="account-sidebar">
                        <!-- User Profile Card -->
                        <div class="profile-card">
                            <div class="profile-avatar">
                                <div class="avatar-circle">
                                    <i class="bi bi-person-fill"></i>
                                </div>
                                <div class="avatar-status">
                                    <i class="bi bi-check-circle-fill"></i>
                                </div>
                            </div>
                            <div class="profile-info">
                                <h3 class="profile-name" th:text="${userObject != null ? userObject.fullName : 'Người dùng'}">Người dùng</h3>
                                <p class="profile-email" th:text="${userObject != null ? userObject.email : currentUser}">user@example.com</p>
                                <span class="profile-badge">
                                    <i class="bi bi-star-fill"></i>
                                    Thành viên từ <span th:text="${userObject != null and userObject.createdAt != null ? #temporals.format(userObject.createdAt, 'yyyy') : '2024'}">2024</span>
                                </span>
                            </div>
                        </div>

                        <!-- Navigation Menu -->
                        <nav class="account-nav">
                            <ul class="nav-list">
                                <li class="nav-item">
                                    <a href="/account/profile" class="nav-link">
                                        <span class="nav-icon">
                                            <i class="bi bi-person"></i>
                                        </span>
                                        <span class="nav-text">Thông tin cá nhân</span>
                                        <span class="nav-arrow">
                                            <i class="bi bi-chevron-right"></i>
                                        </span>
                                    </a>
                                </li>
                                <li class="nav-item">
                                    <a href="/account/orders" class="nav-link active">
                                        <span class="nav-icon">
                                            <i class="bi bi-bag"></i>
                                        </span>
                                        <span class="nav-text">Đơn hàng của tôi</span>
                                        <span class="nav-badge" th:text="${ordersCount}" th:if="${ordersCount > 0}">3</span>
                                        <span class="nav-arrow">
                                            <i class="bi bi-chevron-right"></i>
                                        </span>
                                    </a>
                                </li>
                                <li class="nav-item">
                                    <a href="/account/wishlist" class="nav-link">
                                        <span class="nav-icon">
                                            <i class="bi bi-heart"></i>
                                        </span>
                                        <span class="nav-text">Yêu thích</span>
                                        <span class="nav-badge" th:text="${wishlistCount}" th:if="${wishlistCount > 0}">12</span>
                                        <span class="nav-arrow">
                                            <i class="bi bi-chevron-right"></i>
                                        </span>
                                    </a>
                                </li>
                                <li class="nav-item">
                                    <a href="/account/settings" class="nav-link">
                                        <span class="nav-icon">
                                            <i class="bi bi-gear"></i>
                                        </span>
                                        <span class="nav-text">Cài đặt</span>
                                        <span class="nav-arrow">
                                            <i class="bi bi-chevron-right"></i>
                                        </span>
                                    </a>
                                </li>
                                <li class="nav-divider"></li>
                                <li class="nav-item">
                                    <a href="/logout" class="nav-link logout-link">
                                        <span class="nav-icon">
                                            <i class="bi bi-box-arrow-right"></i>
                                        </span>
                                        <span class="nav-text">Đăng xuất</span>
                                    </a>
                                </li>
                            </ul>
                        </nav>
                    </div>
                </div>

                <!-- Main Content -->
                <div class="col-lg-9">
                    <div class="account-content">
                        
                        <!-- Orders Filter -->
                        <div class="content-card" th:if="${ordersCount > 0}">
                            <div class="card-header">
                                <h2 class="card-title">
                                    <i class="bi bi-funnel"></i>
                                    Bộ lọc đơn hàng
                                </h2>
                            </div>
                            <div class="card-body">
                                <div class="filter-tabs">
                                    <button class="filter-tab active" data-status="all" th:text="'Tất cả (' + ${ordersCount} + ')'">
                                        Tất cả (0)
                                    </button>
                                    <button class="filter-tab" data-status="pending">
                                        Chờ xác nhận (0)
                                    </button>
                                    <button class="filter-tab" data-status="processing">
                                        Đang xử lý (0)
                                    </button>
                                    <button class="filter-tab" data-status="shipped">
                                        Đang giao (0)
                                    </button>
                                    <button class="filter-tab" data-status="delivered">
                                        Đã giao (0)
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- Empty Orders State -->
                        <div class="content-card" th:if="${ordersCount == 0}">
                            <div class="card-body">
                                <div class="empty-activity">
                                    <div class="empty-activity-icon">
                                        <i class="bi bi-bag"></i>
                                    </div>
                                    <h4 class="empty-activity-title">Chưa có đơn hàng nào</h4>
                                    <p class="empty-activity-desc">
                                        Bạn chưa có đơn hàng nào trong hệ thống.<br>
                                        Hãy khám phá và đặt mua những sản phẩm yêu thích!
                                    </p>
                                    <a href="/products" class="btn btn-primary">
                                        <i class="bi bi-search"></i>
                                        Khám phá sản phẩm
                                    </a>
                                </div>
                            </div>
                        </div>

                        <!-- Orders List -->
                        <div class="orders-list" th:if="${ordersCount > 0}">
                            
                            <!-- Order Item 1 -->
                            <div class="order-card">
                                <div class="order-header">
                                    <div class="order-info">
                                        <div class="order-number">#ORD-2024-001</div>
                                        <div class="order-date">Đặt hàng: 15/03/2024</div>
                                    </div>
                                    <div class="order-status">
                                        <span class="status-badge delivered">
                                            <i class="bi bi-check-circle"></i>
                                            Đã giao hàng
                                        </span>
                                    </div>
                                </div>
                                
                                <div class="order-items">
                                    <div class="order-item">
                                        <div class="item-image">
                                            <img src="/images/products/rose-bouquet.jpg" alt="Hoa hồng đỏ">
                                        </div>
                                        <div class="item-details">
                                            <h4 class="item-name">Bó hoa hồng đỏ premium</h4>
                                            <div class="item-specs">
                                                <span class="spec">Số lượng: 1</span>
                                                <span class="spec">Size: Lớn</span>
                                            </div>
                                        </div>
                                        <div class="item-price">
                                            <span class="price">890,000₫</span>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="order-footer">
                                    <div class="order-total">
                                        <span class="total-label">Tổng tiền:</span>
                                        <span class="total-amount">890,000₫</span>
                                    </div>
                                    <div class="order-actions">
                                        <button class="btn-outline-primary">Xem chi tiết</button>
                                        <button class="btn-primary">Đánh giá</button>
                                        <button class="btn-secondary">Mua lại</button>
                                    </div>
                                </div>
                            </div>

                            <!-- Order Item 2 -->
                            <div class="order-card">
                                <div class="order-header">
                                    <div class="order-info">
                                        <div class="order-number">#ORD-2024-002</div>
                                        <div class="order-date">Đặt hàng: 12/03/2024</div>
                                    </div>
                                    <div class="order-status">
                                        <span class="status-badge shipped">
                                            <i class="bi bi-truck"></i>
                                            Đang giao hàng
                                        </span>
                                    </div>
                                </div>
                                
                                <div class="order-items">
                                    <div class="order-item">
                                        <div class="item-image">
                                            <img src="/images/products/lily-bouquet.jpg" alt="Hoa ly trắng">
                                        </div>
                                        <div class="item-details">
                                            <h4 class="item-name">Bó hoa ly trắng tinh khôi</h4>
                                            <div class="item-specs">
                                                <span class="spec">Số lượng: 1</span>
                                                <span class="spec">Size: Vừa</span>
                                            </div>
                                        </div>
                                        <div class="item-price">
                                            <span class="price">650,000₫</span>
                                        </div>
                                    </div>
                                    <div class="order-item">
                                        <div class="item-image">
                                            <img src="/images/products/card.jpg" alt="Thiệp chúc mừng">
                                        </div>
                                        <div class="item-details">
                                            <h4 class="item-name">Thiệp chúc mừng cao cấp</h4>
                                            <div class="item-specs">
                                                <span class="spec">Số lượng: 1</span>
                                                <span class="spec">Loại: Premium</span>
                                            </div>
                                        </div>
                                        <div class="item-price">
                                            <span class="price">50,000₫</span>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="order-footer">
                                    <div class="order-total">
                                        <span class="total-label">Tổng tiền:</span>
                                        <span class="total-amount">700,000₫</span>
                                    </div>
                                    <div class="order-actions">
                                        <button class="btn-outline-primary">Theo dõi</button>
                                        <button class="btn-outline-secondary">Liên hệ</button>
                                    </div>
                                </div>
                            </div>

                            <!-- Order Item 3 -->
                            <div class="order-card">
                                <div class="order-header">
                                    <div class="order-info">
                                        <div class="order-number">#ORD-2024-003</div>
                                        <div class="order-date">Đặt hàng: 10/03/2024</div>
                                    </div>
                                    <div class="order-status">
                                        <span class="status-badge pending">
                                            <i class="bi bi-clock"></i>
                                            Chờ xác nhận
                                        </span>
                                    </div>
                                </div>
                                
                                <div class="order-items">
                                    <div class="order-item">
                                        <div class="item-image">
                                            <img src="/images/products/mixed-bouquet.jpg" alt="Hoa hỗn hợp">
                                        </div>
                                        <div class="item-details">
                                            <h4 class="item-name">Bó hoa hỗn hợp nhiều màu</h4>
                                            <div class="item-specs">
                                                <span class="spec">Số lượng: 2</span>
                                                <span class="spec">Size: Vừa</span>
                                            </div>
                                        </div>
                                        <div class="item-price">
                                            <span class="price">1,200,000₫</span>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="order-footer">
                                    <div class="order-total">
                                        <span class="total-label">Tổng tiền:</span>
                                        <span class="total-amount">1,200,000₫</span>
                                    </div>
                                    <div class="order-actions">
                                        <button class="btn-outline-danger">Hủy đơn</button>
                                        <button class="btn-outline-primary">Chỉnh sửa</button>
                                    </div>
                                </div>
                            </div>

                        </div>

                        <!-- Pagination -->
                        <div class="pagination-wrapper" th:if="${ordersCount > 10}">
                            <nav aria-label="Orders pagination">
                                <ul class="pagination">
                                    <li class="page-item disabled">
                                        <span class="page-link">
                                            <i class="bi bi-chevron-left"></i>
                                        </span>
                                    </li>
                                    <li class="page-item active">
                                        <span class="page-link">1</span>
                                    </li>
                                    <!-- TODO: Add dynamic pagination based on actual order count -->
                                </ul>
                            </nav>
                        </div>

                    </div>
                </div>
                
            </div>
        </div>
    </section>

</th:block>
</body>
</html>
